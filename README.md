# OKsip-MEND
The MEND_mult-master is a multiple-case version of the MEND used in lab data assimilation.
The MEND-NWS is a ecosystem model applied to field data assimilation.
For study details, refer to the paper: ....

## Requirements
Currently, the code is working in Windows environment. To make it working in other environment, you need to change the MEND-NWS/nbproject/Makefile-Debug.mk or MEND_mult-master/nbproject/Makefile-Debug.mk
You need to install gfortran through cygwin, make sure the gfortran is installed at C:\cygwin64\bin\gfortran.exe, otherwise, you need change the path in Makefile-Debug.mk.

## Usage
To use MEND_mult-master, you could run
```
MEND_mult-master/dist/Debug/Cygwin-Windows/mend_mult-master.exe
```
To change the configurition of the model, you could edit the information in input folder such as MEND_mult-master/userio/inp/U13C and MEND_mult-master/MEND.ini

To use MEND-NWS, you could run
```
MEND-NWS/dist/Debug/Cygwin-Windows/mendokw.exe
```
or run a script that could store the namelist information into the output folder as well as some log information
```
python MEND-NWS/pipeline.py "some log information here
```
MEND-NWS/parallel.py and MEND-NWS/parallel_RUN.py is used for parallel computation, hower, only for specific tast for the OKsip paper to address impact of parameter number, however, it could serve as a template for other tasks requiring runing a lot of models fast.
## Introduction to file system
For both MEND_mult-master and MEND-NWS, it needs a input folder (i.e., MEND-NWS/userio/inp_control) storing required file to run the model and a namelist information (i.e., MEND-NWS/MEND_namelist.nml) for the model setting. And the output folder is generated by the program automatically (i.e., MEND_mult-master/userio/out/U13C). It should be noted that namelist file in MEND_mult-master is stored in the input folder while the namelist file in MEND-NWS is stored in the root directory of MEND-NWS.

## To enable isotope calculation in the model
You could change the sSIN_C12_C14 in the namelist file (i.e., MEND-NWS/MEND_namelist.nml or MEND_mult-master/userio/inp/U13C/U13C.ini) to change the ratio of C isotope in the C input. 
